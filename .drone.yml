kind: pipeline
name: Testing

steps:
  - name: Testing
    image: golang
    volumes:
      - name: gosrc
        path: /go/src
    commands:
      - go get github.com/go-sql-driver/mysql
      - go get github.com/mingchoi/struct2sql
      - go get github.com/tucnak/telebot
      - go test -v
      - go vet

  - name: Build
    image: golang
    volumes:
      - name: gosrc
        path: /go/src
      - name: dronesrc
        path: /drone/src
    commands:
      - go build

  - name: Show path
    image: golang
    volumes:
      - name: gosrc
        path: /go/src
      - name: dronesrc
        path: /drone/src
    commands:
      - pwd
      - ls
      - ls /go/src/github.com

volumes:
  - name: gosrc
    temp: {}
  - name: dronesrc
    temp: {}
